<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>睿的小屋子</title>
  
  
  <link href="http://example.com/atom.xml" rel="self"/>
  
  <link href="http://example.com/"/>
  <updated>2022-10-01T03:08:04.455Z</updated>
  <id>http://example.com/</id>
  
  <author>
    <name>睿</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>信息收集-架构-搭建-WAF等</title>
    <link href="http://example.com/2022/10/01/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-%E6%9E%B6%E6%9E%84-%E6%90%AD%E5%BB%BA-WAF%E7%AD%89/"/>
    <id>http://example.com/2022/10/01/%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86-%E6%9E%B6%E6%9E%84-%E6%90%AD%E5%BB%BA-WAF%E7%AD%89/</id>
    <published>2022-10-01T03:06:54.000Z</published>
    <updated>2022-10-01T03:08:04.455Z</updated>
    
    <content type="html"><![CDATA[<h2 id="信息收集-架构-搭建-WAF等"><a href="#信息收集-架构-搭建-WAF等" class="headerlink" title="信息收集-架构,搭建,WAF等"></a>信息收集-架构,搭建,WAF等</h2><h2 id="1-CMS识别技术"><a href="#1-CMS识别技术" class="headerlink" title="1.CMS识别技术"></a>1.CMS识别技术</h2><ol><li><p>网站下方的CMS图标</p></li><li><p>搜索特定的ico文件—hash值与CMS指纹识别库匹配</p></li><li><p>查看网站的搭建平台</p></li><li><p>查看网站的开发语言的脚本框架的漏洞—网站的文件路径</p></li><li><p>分析目录的工作原理—ip和域名的文件结构</p></li><li><p>搜索特定的URL获取相似站点</p></li><li><p>查看网站的响应包</p></li></ol><h2 id="2-源码获取技术"><a href="#2-源码获取技术" class="headerlink" title="2.源码获取技术"></a>2.源码获取技术</h2><ol><li><p> 搜索引擎搜索</p></li><li><p> 第三方源码站—站长之家，菜鸟源码</p></li><li><p> 淘宝咸鱼</p></li><li><p> 内部渠道 </p></li></ol><h2 id="3-架构信息获取"><a href="#3-架构信息获取" class="headerlink" title="3.架构信息获取"></a>3.架构信息获取</h2><p>1．Nmap扫描识别端口和OS的类型</p><p>2．网站区分大小写判断系统</p><p>3．脚本识别数据库—asp+Access；PHP+MySQL；aspx+mssql;jsp+mssql/orcale;Python+mogodb</p><p>4．Os识别数据库—windows才有Access+sqlserver</p><p>5．端口扫描—端口号对应不同的数据库</p><p>6．Nmap扫描第三方平台和软件—phpmyadmin </p><h2 id="4-站点搭建分析"><a href="#4-站点搭建分析" class="headerlink" title="4.站点搭建分析"></a>4.站点搭建分析</h2><h3 id="4-1搭建习惯-目录型站点"><a href="#4-1搭建习惯-目录型站点" class="headerlink" title="4.1搭建习惯-目录型站点"></a>4.1搭建习惯-目录型站点</h3><p>搭建习惯-目录型站点 在站点的层级目录下会存在另一套系统</p><p> 怎么知道网站存在目录：</p><ol><li><p> 目录扫描工具</p></li><li><p> 随意的点击 </p></li></ol><h3 id="4-2搭建习惯-端口类站点"><a href="#4-2搭建习惯-端口类站点" class="headerlink" title="4.2搭建习惯-端口类站点"></a>4.2搭建习惯-端口类站点</h3><p>搭建习惯-端口类站点 不同端口对应不同站点</p><p> 怎么知道网站开放的端口：</p><ul><li>对地址进行端口扫描</li></ul><h3 id="4-3搭建习惯-子域名站点"><a href="#4-3搭建习惯-子域名站点" class="headerlink" title="4.3搭建习惯-子域名站点"></a>4.3搭建习惯-子域名站点</h3><p>搭建习惯-目录型站点 在不同的子域名可能会存在同一服务器上（也可能在不同的服务器上）</p><p> 怎么知道网站的子域名：</p><ul><li>对子域名进行进爆破</li><li>不同的IP重新开始信息收集</li></ul><h3 id="4-4搭建习惯-类似域名站点"><a href="#4-4搭建习惯-类似域名站点" class="headerlink" title="4.4搭建习惯-类似域名站点"></a>4.4搭建习惯-类似域名站点</h3><p>建习惯-类似域名站点 不同的顶级域名可能存在相同的网站不同的IP以及系统</p><p>怎么知道网站的类似站点</p><ul><li>写脚本爆破根域名 </li></ul><h3 id="4-5搭建习惯-旁注-C段站点"><a href="#4-5搭建习惯-旁注-C段站点" class="headerlink" title="4.5搭建习惯-旁注,C段站点"></a>4.5搭建习惯-旁注,C段站点</h3><p>旁注（前提条件：多个站点服务器）：同服务器不同站点，一个域名不行就尝试服务器的另一个域名）； 有一些旁注查询的第三方网站，直接搜，如 <a href="https://www.webscan.cc/%EF%BC%9B">https://www.webscan.cc/；</a></p><p>C段：同网段不同服务器不同站点，例如一个服务器的某站点IP为192.168.1.101，那么就可以从这入手，拿到同一网段另一个服务器（站点IP假设为192.168.1.103）的权限。</p><h3 id="4-6搭建习惯-搭建软件特征站点"><a href="#4-6搭建习惯-搭建软件特征站点" class="headerlink" title="4.6搭建习惯-搭建软件特征站点"></a>4.6搭建习惯-搭建软件特征站点</h3><p>搭建平台—宝塔，phpStudy，inmap等等，具有安全隐患，如phpStudy上面会有PhpMyAdmin，账号默认登录 </p><p>怎么知道网站的搭建软件</p><ul><li>软件常用数据库与中间件搭配信息</li><li>默认软件端口</li></ul><h2 id="5-WAF防护分析"><a href="#5-WAF防护分析" class="headerlink" title="5. WAF防护分析"></a>5. WAF防护分析</h2><p>Web应用防护系统（也称为：网站应用级入侵防御系统。英文：Web Application Firewall，简称： WAF）用户一般采用防火墙作为安第一道防线。在现实中，Web服务器和应用存在各种安全问题，普通防火墙难以检测和阻断的，由此产生了WAF。—dns域名服务器和路由器之间，分为软件和硬件。</p><p>Web应用防护与防火墙不同，WAF工作在应用层，对来自Web应用程序客户端的各类请求进行内容检测和验证，确保其安全性与合法性，对非法的请求予以实时阻断，从而对各类网站站点进行有效防护。 </p><h3 id="5-1如何快速识别-WAF"><a href="#5-1如何快速识别-WAF" class="headerlink" title="5.1如何快速识别 WAF"></a>5.1如何快速识别 WAF</h3><p>工具识别</p><p><a href="https://github.com/EnableSecurity/wafw00f">https://github.com/EnableSecurity/wafw00f</a> </p><p>利用浏览器抓包识别</p><p>— X-Powered-By: WAF</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;信息收集-架构-搭建-WAF等&quot;&gt;&lt;a href=&quot;#信息收集-架构-搭建-WAF等&quot; class=&quot;headerlink&quot; title=&quot;信息收集-架构,搭建,WAF等&quot;&gt;&lt;/a&gt;信息收集-架构,搭建,WAF等&lt;/h2&gt;&lt;h2 id=&quot;1-CMS识别技术&quot;&gt;&lt;a</summary>
      
    
    
    
    
    <category term="学习记录" scheme="http://example.com/tags/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    
  </entry>
  
  <entry>
    <title>OSPF协议</title>
    <link href="http://example.com/2022/10/01/OSPF%E5%8D%8F%E8%AE%AE/"/>
    <id>http://example.com/2022/10/01/OSPF%E5%8D%8F%E8%AE%AE/</id>
    <published>2022-10-01T03:03:30.000Z</published>
    <updated>2022-10-12T09:51:49.197Z</updated>
    
    <content type="html"><![CDATA[<h2 id="OSPF协议"><a href="#OSPF协议" class="headerlink" title="OSPF协议"></a>OSPF协议</h2><h3 id="OSPF有几种报文？"><a href="#OSPF有几种报文？" class="headerlink" title="OSPF有几种报文？"></a>OSPF有几种报文？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、hello，用于协商维持建立OSPF邻居</span><br><span class="line"></span><br><span class="line">2、DD报文，用于交互LSA的摘要信息</span><br><span class="line"></span><br><span class="line">3、LSR报文，用于请求一条LSA</span><br><span class="line"></span><br><span class="line">4、LSU报文，用于发送LSA的详细信息</span><br><span class="line"></span><br><span class="line">5、LSACK，用于对接收到的LSA进行确认</span><br></pre></td></tr></table></figure><h3 id="Hello报文"><a href="#Hello报文" class="headerlink" title="Hello报文"></a>Hello报文</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">version，描述版本号</span><br><span class="line">message Type 协议报文类型</span><br><span class="line">source ospf router，描述发送该hello报文的路由器ID</span><br><span class="line">area ID,描述发送该报文的接口在哪个区域</span><br><span class="line">checksum 校验和，用于保证保证报文的完整性</span><br><span class="line">auth Type 认证类型，Null</span><br><span class="line">auth data 认证数据</span><br></pre></td></tr></table></figure><h3 id="DR与BDR选举原则"><a href="#DR与BDR选举原则" class="headerlink" title="DR与BDR选举原则"></a>DR与BDR选举原则</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1、优先级，默认1，越大越优先</span><br><span class="line">2、当优先级一致，比较接口地址大的为DR</span><br><span class="line">3、DR优先级为0，则不参与DR与BDR的选举</span><br><span class="line">4、DR与BDR选举完成，不允许被强占</span><br></pre></td></tr></table></figure><h3 id="OSPF邻居建立条件"><a href="#OSPF邻居建立条件" class="headerlink" title="OSPF邻居建立条件"></a>OSPF邻居建立条件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">1、版本一致</span><br><span class="line">2、Router ID不能冲突</span><br><span class="line">3、区域ID一致</span><br><span class="line">4、认证类型和密码一致</span><br><span class="line">5、俩端IP需要在同一网段（掩码相同）</span><br><span class="line">6、hello报文发送间隔时间一致</span><br><span class="line">7、dead时间一致</span><br><span class="line">8、option字段中N和E一致</span><br><span class="line">9、俩段MTU的接口一致</span><br></pre></td></tr></table></figure><h6 id="DD报文包括摘要信息。LSA"><a href="#DD报文包括摘要信息。LSA" class="headerlink" title="DD报文包括摘要信息。LSA"></a>DD报文包括摘要信息。LSA</h6><p>OSPF涉及到五种报文，7个状态</p><h3 id="OSPF协议如何保证报文可靠性传输？"><a href="#OSPF协议如何保证报文可靠性传输？" class="headerlink" title="OSPF协议如何保证报文可靠性传输？"></a>OSPF协议如何保证报文可靠性传输？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1、邻居建立的三次握手</span><br><span class="line">2、重传机制</span><br><span class="line">3、LSR、LSU和LSACK显示确认机制，DD报文的隐式确认</span><br></pre></td></tr></table></figure><p>发送空的DD报文，目的是为了主从选举，按需同步。</p><h3 id="OSPF的七种状态"><a href="#OSPF的七种状态" class="headerlink" title="OSPF的七种状态"></a>OSPF的七种状态</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">down——代表osf没有发现任何OSPF邻居</span><br><span class="line">init——代表发现OSPF邻居</span><br><span class="line">2-way——收到OSPF邻居的hello报文，并发现对方的active-neighbor有自身的router-id</span><br><span class="line">Exstart——用于发送空的DD报文，互相进行主从选举</span><br><span class="line">Exchange——当确定主从关系后，进入到exchange状态发送带有LSA摘要信息的DD报文</span><br><span class="line">Loading——当收到对方的DD报文后，同时发现M=0，将会进入到loading状态请求自身没有的LSA</span><br><span class="line">Full——当自身请求列表中，所有接收的LSA，对方都发送过来之后，将会进入到Full状态</span><br></pre></td></tr></table></figure><h3 id="OSPF-LSDB的交互原则："><a href="#OSPF-LSDB的交互原则：" class="headerlink" title="OSPF LSDB的交互原则："></a>OSPF LSDB的交互原则：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、互相交互自身没有的LSA</span><br><span class="line">2、以及使用新的LSA，替换掉旧的LSA</span><br></pre></td></tr></table></figure><h3 id="如何判断唯一的LSA？"><a href="#如何判断唯一的LSA？" class="headerlink" title="如何判断唯一的LSA？"></a>如何判断唯一的LSA？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">LSA的三要素：</span><br><span class="line">1、LSA类型（type）</span><br><span class="line">2、LSA的ID（链路状态ID） link State ID</span><br><span class="line">3、LSA的通告者 adv router</span><br></pre></td></tr></table></figure><h3 id="如和判断LSA的新旧状态？"><a href="#如和判断LSA的新旧状态？" class="headerlink" title="如和判断LSA的新旧状态？"></a>如和判断LSA的新旧状态？</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、首先比较LSA的序列号，初始0x80000001每次OSPF更新，都会+1</span><br><span class="line">2、序列号相同，则比较检验和，值越大越优先</span><br><span class="line">3、当检验和相同，则比较LSA的age时间</span><br><span class="line">（1）首先age=3600s的LSA，用于删除一条LSA</span><br><span class="line">（2）如果俩条LSA的age时间相差大于900s，将会选中age数值小的LSA。</span><br><span class="line">（3）如果俩条LSa的age时间小于900s，将会认为相同，保持原有不变。</span><br></pre></td></tr></table></figure><p>每个OSPF路由器，都会用一类LSA描述自身所有启用的OSPF的接口</p><h3 id="OSPF的更新机制有俩种："><a href="#OSPF的更新机制有俩种：" class="headerlink" title="OSPF的更新机制有俩种："></a>OSPF的更新机制有俩种：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1、触发更新，当链路状态发生改变之后，OSPF将会触发更新，比如网段掩码变了，取消宣告</span><br><span class="line">2、周期更新，每个OSPF路由器自身产生的LSA都会间隔30分钟周期更新一次</span><br></pre></td></tr></table></figure><h3 id="OSPF的老化机制："><a href="#OSPF的老化机制：" class="headerlink" title="OSPF的老化机制："></a>OSPF的老化机制：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">OSPF路由器每产生一条LSA，都会在一个age时间为3600s，初始值为1，当age时间递增到3600s之后，将会认为LSA老化，从自身LSDB中删除。</span><br></pre></td></tr></table></figure><h3 id="OSPF删除机制："><a href="#OSPF删除机制：" class="headerlink" title="OSPF删除机制："></a>OSPF删除机制：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当OSPF需要删除一条LSA的时候，将会把LSA的age时间变化为3600s，当其他的路由器收到该LSA之后，将会把自身LSDB中对应的LSA删除。</span><br></pre></td></tr></table></figure><p><img src="https://s2.loli.net/2022/10/12/WcV24Hm1EDdGTJ8.png" alt="未命名图片"></p><h3 id="OSPF网络类型：4-种"><a href="#OSPF网络类型：4-种" class="headerlink" title="OSPF网络类型：4 种"></a>OSPF网络类型：4 种</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、P2P：链路层协议是PPP，HDLC，默认是P2P</span><br><span class="line">2、P2MP（点到多点）DS-VPN，DM-VPN</span><br><span class="line">hello报文是组播形式224.0.0.5，其余报文（DD，LSR，LSU，LSACK）为单播</span><br><span class="line">3、Broadcast广播类型：组播224.0..5</span><br><span class="line">4、MA</span><br><span class="line">5、NBMA，没有广播和组播功能的环境，以单播发送报文。</span><br></pre></td></tr></table></figure><p>BMA 广播多路访问—————-&gt;—-以太网（共享式）—–双绞线</p><p>网络类型</p><p>BMA 广播多路访问—————-&gt;—-以太网（共享式）—–双绞线</p><table><thead><tr><th>生存时间=10</th><th>死亡时间=40</th><th>子网掩码是否协商：是</th><th>需不需要选举DR/BDR：需要</th><th>邻居</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>NBMA 非广播多路访问———-&gt;——全互联FR（帧中继）—串行电缆</p><table><thead><tr><th>生存时间=30</th><th>死亡时间=120</th><th>子网掩码是否协商：是</th><th>需不需要选举DR/BDR：需要</th><th>邻居</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>P2P 点到点——————–&gt;——-ppp/HDLC————–串行电缆</p><table><thead><tr><th>生存时间=10</th><th>死亡时间=40</th><th>子网掩码是否协商：否</th><th>需不需要选举DR/BDR：不需要</th><th>邻接</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>P2MP 点到多点————–&gt;——–非全互联FR—————串行电缆</p><table><thead><tr><th>生存时间=30</th><th>死亡时间=120</th><th>子网掩码是否协商：是</th><th>需不需要选举DR/BDR：不需要</th><th>邻接</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>Virtual 虚拟网络 ———–&gt;———-vlink———————-双绞线</p><table><thead><tr><th>生存时间=10</th><th>死亡时间=40</th><th>子网掩码是否协商：否</th><th>需不需要选举DR/BDR：不需要</th><th>邻接</th></tr></thead><tbody><tr><td></td><td></td><td></td><td></td><td></td></tr></tbody></table><p>当一个区域内地俩台路由器，一端是P2P另一端是BMA，邻居关系可以建立，邻接关系可以起来，但是不会传路由</p><h3 id="LSU和LSACK的发送地址根据路由器角色有所变化"><a href="#LSU和LSACK的发送地址根据路由器角色有所变化" class="headerlink" title="LSU和LSACK的发送地址根据路由器角色有所变化"></a>LSU和LSACK的发送地址根据路由器角色有所变化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1）DRother--DRother产生的LSU通过224.0.0.6发送给DR和BDR。</span><br><span class="line"></span><br><span class="line">2）DR通过224.0.0.5发送给其他的DRohter和BDR</span><br></pre></td></tr></table></figure><h3 id="DR和BDR的区别："><a href="#DR和BDR的区别：" class="headerlink" title="DR和BDR的区别："></a>DR和BDR的区别：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1）DR收到DRother的LSU则泛洪，BDR不进行反馈</span><br><span class="line"></span><br><span class="line">DR和BDR同时监听224.0.0.5和224.0.0.6</span><br><span class="line"></span><br><span class="line">2）DRother不监听224.0.0.6，仅监听224.0.0.5</span><br></pre></td></tr></table></figure><p>LSR是以单播进发送</p><h2 id="OSPF域间路由—LSA"><a href="#OSPF域间路由—LSA" class="headerlink" title="OSPF域间路由—LSA"></a>OSPF域间路由—LSA</h2><p>链路类型：</p><p>​    P2P:描述了对端链路信息和本端链路信息</p><p>​    （描述了从一台路由器到另外一台路由器之间点到点的链路信息。用来描述拓扑信息）（P2P P2MP）</p><p>​    transNET：</p><p>​                        描述了从一台路由器需要经过一个transit（BMA/NBMA网络）网络的网段信息。用来描述拓扑信息。 </p><p>​    STUBnet：</p><p>​                        用来描述路由器本端loopback接口信息。用来描述路由信息。</p><h3 id="一类LSA"><a href="#一类LSA" class="headerlink" title="一类LSA"></a>一类LSA</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">一类LSA：router-LSA 路由器-LSA</span><br><span class="line">LSID:router-ID</span><br><span class="line">通告路由器：通告路由器</span><br><span class="line">范围：本区域内</span><br><span class="line">作用：描述本端链路信息和对端DR接口信息（BMA/NBMA）</span><br><span class="line">  描述本端接口信息和对端设备信息和所在网段信息</span><br></pre></td></tr></table></figure><p>用来构建区域内拓扑</p><h4 id="为什么需要二类LSA"><a href="#为什么需要二类LSA" class="headerlink" title="为什么需要二类LSA?"></a>为什么需要二类LSA?</h4><p>​    在一类LSA中没有描述DRother和DR之间所在网络和区域内所在路由器的个数。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查看二类LSA： display ospf lsdb network</span><br></pre></td></tr></table></figure><h3 id="二类LSA"><a href="#二类LSA" class="headerlink" title="二类LSA"></a>二类LSA</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">二类LSA：NETwork--LSA---网路LSA</span><br><span class="line">LSID：DR接口IP</span><br><span class="line">通告路由器：DR路由器</span><br><span class="line">范围：本区域内</span><br><span class="line">作用：描述了某网络中路由器的集合</span><br></pre></td></tr></table></figure><p><strong>一类LSA和二类LSA共同描述了区域内的拓扑</strong></p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dis ospf lsdb summary</span><br></pre></td></tr></table></figure><h3 id="三类LSA"><a href="#三类LSA" class="headerlink" title="三类LSA"></a>三类LSA</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">三类：LSA：network-summary-LSA：网络汇总LSA</span><br><span class="line"> LSID：区域外某网络号</span><br><span class="line"> 通告路由器：ABR路由</span><br><span class="line"> 范围：区域间</span><br><span class="line"> 作用：描述了区域外某条路由信息</span><br><span class="line"> 特性：具有距离矢量特性</span><br><span class="line"> 缺点：导致LSDB增大</span><br><span class="line"> 三类聚合：CIDR（需要被聚合网段所属区域）</span><br><span class="line">【R3-ospf-area 0.0.0.0】abr-summary 172.16.0.0 255.255.252.0</span><br><span class="line"></span><br></pre></td></tr></table></figure><p><strong>三类构建域间拓扑</strong></p><h3 id="四类LSA"><a href="#四类LSA" class="headerlink" title="四类LSA"></a>四类LSA</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">四类LSA：ASBR-summary-LSA： ABR汇总LSA</span><br><span class="line">LSID：ASBR的router-id</span><br><span class="line">通告路由器：ABR</span><br><span class="line">作用：描述ASBR的作用</span><br></pre></td></tr></table></figure><h3 id="五类LSA"><a href="#五类LSA" class="headerlink" title="五类LSA"></a>五类LSA</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">五类构建AS外拓扑</span><br><span class="line">OSPF环路假设：？？？</span><br><span class="line">外部度量计算类型：</span><br><span class="line">E type 1：内部度量+外部度量</span><br><span class="line">E type 2：外部度量</span><br><span class="line">1 优于 2</span><br><span class="line">修改外部度量计算类型？</span><br><span class="line">【r4-ospf-1】import-route rip type 1</span><br></pre></td></tr></table></figure><h3 id="ABR"><a href="#ABR" class="headerlink" title="ABR"></a>ABR</h3><h4 id="ABR——区域间路由器，区域边界路由器"><a href="#ABR——区域间路由器，区域边界路由器" class="headerlink" title="ABR——区域间路由器，区域边界路由器"></a>ABR——区域间路由器，区域边界路由器</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1）定义：连接了多个区域，并且有一个活动的接口处理骨干区域的路由，即为ABR。</span><br><span class="line">2）表示方式：ABR会在自身产生的一类LSA中，表明自己是一台ABR</span><br></pre></td></tr></table></figure><h3 id="ABR的作用："><a href="#ABR的作用：" class="headerlink" title="ABR的作用："></a>ABR的作用：</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1）将直连区域内的1类和2类LSA，转换成3类LSA，传递至其他区域。</span><br><span class="line"></span><br><span class="line">2）将骨干区域内的3类LSA，转换成非骨干区域内的3类LSA。</span><br></pre></td></tr></table></figure><h3 id="区域间"><a href="#区域间" class="headerlink" title="区域间"></a>区域间</h3><h4 id="区域间的路由计算："><a href="#区域间的路由计算：" class="headerlink" title="区域间的路由计算："></a>区域间的路由计算：</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1）路由条目如何计算：通过3类LSA携带的LSID+Net mask计算出网络号和掩码信息</span><br></pre></td></tr></table></figure><h4 id="区域间路由防环原则"><a href="#区域间路由防环原则" class="headerlink" title="区域间路由防环原则"></a>区域间路由防环原则</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1）定义ABR设备，且定义了区域间路由的转换只能由ABR完成，而ABR是连接到骨干区域的，所以在OSPF区域设计，要保证非骨干区域与骨干区域相连。</span><br><span class="line">2）ABR永远不计算非骨干区域的三类LSA，即不加入路由表。</span><br><span class="line">3）非骨干区域有三类LSA，骨干区域肯定也有这条LSA。</span><br></pre></td></tr></table></figure><h3 id="虚拟链路"><a href="#虚拟链路" class="headerlink" title="虚拟链路"></a>虚拟链路</h3><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1）虚链路属于区域0的逻辑链路</span><br><span class="line">2）虚链路不能穿越特殊区域</span><br><span class="line">3）虚链路只能穿越一个常规的非骨干区域</span><br><span class="line">4）区域0做了认证，由于虚链路属于0，也会启用认证</span><br></pre></td></tr></table></figure><h3 id="OSPF汇总"><a href="#OSPF汇总" class="headerlink" title="OSPF汇总"></a>OSPF汇总</h3><p>1、在ABR上针对一个区域内的1类、2类LSA路由进行汇总</p><p>2、汇总路由的cost，继承明细路由中最大的cost值</p><p>3、明细路由出现震荡，汇总路由不会产生影响，只有当所有明细路由失效之后，汇总路由才会失效。</p><p>4、如果有两个ABR，需要在两个ABR上进行汇总</p><p>5、汇总中的防环：即ABR在一个区域内产生的一条3类LSA之后，如果在该区域也收到了其他ABR产生的相同3类，则不会计算该3类LSA。</p><p>6、在ASBR上针对自身产生的外部路由进行汇总</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;OSPF协议&quot;&gt;&lt;a href=&quot;#OSPF协议&quot; class=&quot;headerlink&quot; title=&quot;OSPF协议&quot;&gt;&lt;/a&gt;OSPF协议&lt;/h2&gt;&lt;h3 id=&quot;OSPF有几种报文？&quot;&gt;&lt;a href=&quot;#OSPF有几种报文？&quot; class=&quot;headerli</summary>
      
    
    
    
    
    <category term="-该死的OSOF协议" scheme="http://example.com/tags/%E8%AF%A5%E6%AD%BB%E7%9A%84OSOF%E5%8D%8F%E8%AE%AE/"/>
    
  </entry>
  
  <entry>
    <title>Hello World</title>
    <link href="http://example.com/2022/09/28/hello-world/"/>
    <id>http://example.com/2022/09/28/hello-world/</id>
    <published>2022-09-28T12:13:07.802Z</published>
    <updated>2022-09-28T12:00:38.905Z</updated>
    
    <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.io/docs/&quot;&gt;documentation&lt;/a&gt; for</summary>
      
    
    
    
    
  </entry>
  
</feed>
